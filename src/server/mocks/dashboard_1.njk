{% extends 'layouts/page.njk' %}

{% block content %}
  {{ appHeading({
    text: 'Holding Summary'
  }) }}




<body class="govuk-template__body">
<script>
  document.body.className += ' js-enabled';
</script>

<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/govuk-frontend@5.13.0/dist/govuk/govuk-frontend.min.css">

<link href="https://cdn.jsdelivr.net/gh/OrdnanceSurvey/os-api-branding@latest/os-api-branding.css"
      rel="stylesheet"/>
<link href="https://unpkg.com/maplibre-gl@5.7.1/dist/maplibre-gl.css"
      rel="stylesheet"/>

<link href="/public/assets/css/dashboard_1.css" rel="stylesheet"/>
<script src="https://d3js.org/d3.v7.min.js"></script>

<div class="govuk-width-container">

  <main class="govuk-main-wrapper govuk-!-padding-top-3 govuk-!-padding-bottom-3">

    <!-- Filters row: 4 columns -->
    <section aria-label="Filters" class="govuk-!-margin-bottom-3">
      <div class="govuk-grid-row dashboard-filter-row">
        <div class="govuk-grid-column-one-quarter">
          <button class="govuk-button govuk-button--secondary govuk-!-margin-bottom-2"
                  type="button">
            Reset filters
          </button>
        </div>

        <div class="govuk-grid-column-one-quarter">
          <div class="govuk-form-group">
            <label class="govuk-label" for="filter-holding-no">Holding No.</label>
            <input class="govuk-input" id="filter-holding-no" value="1X/1XX/01XX">
          </div>
        </div>

        <div class="govuk-grid-column-one-quarter">
          <div class="govuk-form-group">
            <label class="govuk-label" for="filter-holder-name">CPH holder name</label>
            <input class="govuk-input" id="filter-holder-name" value="A Farm Ltd">
          </div>
        </div>

        <div class="govuk-grid-column-one-quarter">
          <div class="govuk-form-group">
            <label class="govuk-label" for="filter-herd-mark">Herd mark</label>
            <input class="govuk-input" id="filter-herd-mark" value="299991">
          </div>
        </div>
      </div>
    </section>

    <!-- Holding details strip -->
    <section aria-label="Holding details" class="govuk-!-margin-bottom-3">
      <table class="govuk-table govuk-table--small-text-until-tablet">
        <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="col">Holding No.</th>
          <th class="govuk-table__header" scope="col">Holding type</th>
          <th class="govuk-table__header" scope="col">OS map reference</th>
          <th class="govuk-table__header" scope="col">CPH holder name</th>
          <th class="govuk-table__header" scope="col">CPH holder address</th>
          <th class="govuk-table__header" scope="col">Local authority</th>
          <th class="govuk-table__header" scope="col">Telephone</th>
          <th class="govuk-table__header" scope="col">Species</th>
        </tr>
        </thead>
        <tbody class="govuk-table__body">
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">1X/1XX/0XXX</td>
          <td class="govuk-table__cell">Not known</td>
          <td class="govuk-table__cell">TL9105 0130</td>
          <td class="govuk-table__cell">A farm in the uk Ltd</td>
          <td class="govuk-table__cell">A Farm Ltd, London, SW1</td>
          <td class="govuk-table__cell">A Council</td>
          <td class="govuk-table__cell">01999 999999</td>
          <td class="govuk-table__cell">Sheep, cattle, goats</td>
        </tr>
        </tbody>
      </table>
    </section>

    <!-- Single row: 2 columns -->
    <section aria-label="Holding summary, charts and map">
      <div class="govuk-grid-row">

        <!-- LEFT COLUMN: two rows of two cards side by side -->
        <div class="govuk-grid-column-two-thirds">

          <!-- Row 1: On / Off summaries side by side -->
          <div class="govuk-grid-row dashboard-card-stack">
            <div class="govuk-grid-column-one-half">
              <div class="govuk-summary-card">
                <div class="govuk-summary-card__title-wrapper">
                  <h2 class="govuk-summary-card__title">On move summary</h2>
                </div>
                <div class="govuk-summary-card__content dashboard-card-body">
                  <dl class="govuk-summary-list">
                    <div class="govuk-summary-list__row">
                      <dt class="govuk-summary-list__key">No. of moves</dt>
                      <dd class="govuk-summary-list__value">1,449</dd>
                    </div>
                    <div class="govuk-summary-list__row">
                      <dt class="govuk-summary-list__key">No. of animals</dt>
                      <dd class="govuk-summary-list__value">5,399</dd>
                    </div>
                  </dl>

                  <h3 class="govuk-heading-s govuk-!-margin-top-3">By holding type</h3>
                  <table class="govuk-table govuk-table--small-text-until-tablet">
                    <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                      <th class="govuk-table__header" scope="col">Holding type</th>
                      <th class="govuk-table__header" scope="col">Moves</th>
                      <th class="govuk-table__header" scope="col">Animals</th>
                    </tr>
                    </thead>
                    <tbody class="govuk-table__body">
                    <tr class="govuk-table__row">
                      <td class="govuk-table__cell">Agricultural holding</td>
                      <td class="govuk-table__cell">1,322</td>
                      <td class="govuk-table__cell">4,597</td>
                    </tr>
                    <tr class="govuk-table__row">
                      <td class="govuk-table__cell">Non-domestic showground</td>
                      <td class="govuk-table__cell">94</td>
                      <td class="govuk-table__cell">706</td>
                    </tr>
                    <tr class="govuk-table__row">
                      <td class="govuk-table__cell">Market</td>
                      <td class="govuk-table__cell">33</td>
                      <td class="govuk-table__cell">96</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="govuk-grid-column-one-half">
              <div class="govuk-summary-card">
                <div class="govuk-summary-card__title-wrapper">
                  <h2 class="govuk-summary-card__title">Off move summary</h2>
                </div>
                <div class="govuk-summary-card__content dashboard-card-body">
                  <dl class="govuk-summary-list">
                    <div class="govuk-summary-list__row">
                      <dt class="govuk-summary-list__key">No. of moves</dt>
                      <dd class="govuk-summary-list__value">1,776</dd>
                    </div>
                    <div class="govuk-summary-list__row">
                      <dt class="govuk-summary-list__key">No. of animals</dt>
                      <dd class="govuk-summary-list__value">5,006</dd>
                    </div>
                  </dl>

                  <h3 class="govuk-heading-s govuk-!-margin-top-3">By holding type</h3>
                  <table class="govuk-table govuk-table--small-text-until-tablet">
                    <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                      <th class="govuk-table__header" scope="col">Holding type</th>
                      <th class="govuk-table__header" scope="col">Moves</th>
                      <th class="govuk-table__header" scope="col">Animals</th>
                    </tr>
                    </thead>
                    <tbody class="govuk-table__body">
                    <tr class="govuk-table__row">
                      <td class="govuk-table__cell">Agricultural holding</td>
                      <td class="govuk-table__cell">1,347</td>
                      <td class="govuk-table__cell">4,182</td>
                    </tr>
                    <tr class="govuk-table__row">
                      <td class="govuk-table__cell">Non-domestic showground</td>
                      <td class="govuk-table__cell">294</td>
                      <td class="govuk-table__cell">718</td>
                    </tr>
                    <tr class="govuk-table__row">
                      <td class="govuk-table__cell">Market</td>
                      <td class="govuk-table__cell">135</td>
                      <td class="govuk-table__cell">106</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- Row 2: Direction / Species charts side by side -->
          <div class="govuk-grid-row dashboard-card-stack">
            <div class="govuk-grid-column-one-half">
              <div class="govuk-summary-card">
                <div class="govuk-summary-card__title-wrapper">
                  <h2 class="govuk-summary-card__title">No. of moves by direction</h2>
                </div>
                <div class="govuk-summary-card__content dashboard-card-body">
                  <svg aria-label="Bar chart showing number of moves by direction over time" class="chart-svg"
                       id="chart-moves-direction"></svg>
                </div>
              </div>
            </div>

            <div class="govuk-grid-column-one-half">
              <div class="govuk-summary-card">
                <div class="govuk-summary-card__title-wrapper">
                  <h2 class="govuk-summary-card__title">No. of moves by species</h2>
                </div>
                <div class="govuk-summary-card__content dashboard-card-body">
                  <svg aria-label="Bar chart showing number of moves by species over time" class="chart-svg"
                       id="chart-moves-species"></svg>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- RIGHT COLUMN: tall map card -->
        <div class="govuk-grid-column-one-third">
          <div class="govuk-summary-card dashboard-map-card">
            <div class="govuk-summary-card__title-wrapper">
              <h2 class="govuk-summary-card__title">Holdings</h2>
            </div>
            <div class="govuk-summary-card__content dashboard-card-body">
              <div id="holding-map"></div>

              <div aria-label="Map legend" class="dashboard-map-legend">
                <span class="govuk-body-s">Holding:</span>
                <span class="dashboard-legend-entry">
                  <span class="dashboard-legend-swatch dashboard-legend-in"></span>
                  <span class="govuk-body-s">In</span>
                </span>
                <span class="dashboard-legend-entry">
                  <span class="dashboard-legend-swatch dashboard-legend-out"></span>
                  <span class="govuk-body-s">Out</span>
                </span>
                <span class="dashboard-legend-entry">
                  <span class="dashboard-legend-swatch dashboard-legend-both"></span>
                  <span class="govuk-body-s">Both</span>
                </span>
                <span class="dashboard-legend-entry">
                  <span class="dashboard-legend-swatch dashboard-legend-none"></span>
                  <span class="govuk-body-s">Unmapped holdings: 151</span>
                </span>
              </div>
            </div>
          </div>
        </div>
        <p class="govuk-body-s">
          Contains OS data Â© Crown copyright and database right
          <span id="os-year"></span>.
      </div>
    </section>

  </main>
</div>


<!-- OS branding + MapLibre JS -->
<script src="https://cdn.jsdelivr.net/gh/OrdnanceSurvey/os-api-branding@latest/os-api-branding.js"></script>
<script src="https://unpkg.com/maplibre-gl@5.7.1/dist/maplibre-gl.js"></script>

<script type="module" src="/public/assets/js/dashboard_1.js"></script>

</body>
{% endblock %}

